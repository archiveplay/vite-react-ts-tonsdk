name: Build and Deploy

on:
  push:
    branches:
      - master

permissions:
  contents: write

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      # 1. –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
      - name: Checkout üõéÔ∏è
        uses: actions/checkout@v4

      # 2. –°—Ç–∞–≤–∏–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
      - name: Install dependencies
        run: npm ci

      # 3. –°–±–æ—Ä–∫–∞
      - name: Build project
        run: npm run build
        env:
          CI: false

      # 4. –û—Ç–ª–∞–¥–∫–∞ ‚Äî –ø—Ä–æ–≤–µ—Ä–∏–º, —á—Ç–æ –≤ dist –µ—Å—Ç—å –±–∏–ª–¥
      - name: Debug dist content
        run: |
          echo "=== DIST CONTENT ==="
          ls -la dist

      # 5. –î–µ–ø–ª–æ–π –Ω–∞ gh-pages (—Å –ø–æ–ª–Ω—ã–º –∑–∞—Ç–∏—Ä–∞–Ω–∏–µ–º)
      - name: Deploy üöÄ
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          branch: gh-pages
          folder: dist
          clean: true # –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞–µ—Ç —Å—Ç–∞—Ä–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ

